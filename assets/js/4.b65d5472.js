(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{166:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAkNJREFUOBGdlc9vDVEUx7/3PlUawaaKiA2LZ6PSZQled8TGQkjQCGn/AF3YWMzCxqLdIxG0ElY2xK5F0i4FGyTsBKMbQuj7NeNzZjLhjZn0eTe5b+4953y/95x7zj3PqWwE2oxqryoaU6wzzDXyuqWGFpC9VKCvRVD3jzDQBqDnAU9AskeR6nL6ktjF2oJ8Lfs3yG+opZsQ//ibo5PwsnZpPYZeh9TGk1h3+S5qRctax66lQfXrAPrTzBqSJ/qpSV3R+4z0D2Gg3erTAxRD+DSlz7qn62pmhh3fSSy36hTk08hDrI7j6TuzSQktzIoeMqvc0VGUzzsIyjaBRiB9hOdvieSYhe8TW6cL3NtBTprqmsyAdrBhDOu5d4bTJW3SRi1xwid90JHSMM26aFj4O/UY1TZ916jlbB+XW2XO/jeZHZDe8yyrKgkd9vBbndVxecn0PY04wdbJQc1DNk7gISEv90RmoBQbUpvjlpSoZ6I80KniCfUO8iHcHczru94bNoZDuu1xd4FFP2GPdk2QN4zAOjiamvf6xUMXb1M6yyPqy9uuujeMA2vvu6EXXlf1jVu8Rshj2qETqxLkDQxjldKGA670pUR0jZaeoZim+kfymNK92RrGsMbBKG4OTV3UR90vLXQLc7tO8jsDQ0ioueaQuWDtawAap8NJsiLNsV5M6myFlSObA9pPZaTtK9JTcjBR3L4y0s4GWyWUBkRhEk3aYK0iXiPvosFmpPa1v4C2hnnrNcDnIGkx55DNo32FvvAv4DeiOaw0dqR9uwAAAABJRU5ErkJggg=="},171:function(t,e,s){"use strict";s.r(e);var n=[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"api-server-node-express-mongo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#api-server-node-express-mongo","aria-hidden":"true"}},[this._v("#")]),this._v(" API Server: Node, Express, Mongo")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("The server sub-project provides the API server")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"run"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#run","aria-hidden":"true"}},[this._v("#")]),this._v(" Run")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("docker-compose up --build\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("docker-compose up --build -d \n\ndocker-compose logs -f simple-app\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("docker-compose exec simple-app sh\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("To test the server "),e("code",[this._v("curl http://localhost:3005")]),this._v(" (may need to adjust the port as configuration changes)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"package-json"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#package-json","aria-hidden":"true"}},[this._v("#")]),this._v(" package.json")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(166),alt:"unchecked",title:"unchecked"}}),this._v(" WIP: To do for this project is to have a single docker configuration and yet choose between the production\nand development script.  Currently, the set up loads 'start.dev' with hot swap via "),e("code",[this._v("nodemon")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('    ...\n  "scripts": {\n    "start": "node index.js",\n    "start.dev": "nodemon -L"\n  },\n  ...\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"placeholder-for-i18n"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#placeholder-for-i18n","aria-hidden":"true"}},[this._v("#")]),this._v(" Placeholder for I18N")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("app = express()\n...\n// Usage:  req.t('some string') returns the same string but in the future you can translate the text\napp.t = txt => {\n  return txt\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"unhandled-rejections-and-exceptions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#unhandled-rejections-and-exceptions","aria-hidden":"true"}},[this._v("#")]),this._v(" Unhandled rejections and exceptions")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initUnhandled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n  Define application wide handlers for unhandled exceptions and rejections.\n  See https://nodejs.org/api/process.html#process_event_unhandledrejection\n   */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("listeners")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'unhandledRejection'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'unhandledRejection'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* , promise */")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-=-=-=-=-= UNHANDLED REJECTION %s %O'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stack"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("listeners")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'uncaughtException'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'uncaughtException'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.-.-.-.-.-. UNCAUGHT EXCEPTION %s %O'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stack"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])}],a=s(0),r=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),s("p",[t._v("The sub-project is located in "),s("code",[t._v("server/")]),t._v("\nThe code is located in "),s("code",[t._v("server/src/")]),t._v(" directory.\nThe code should be self-documenting.\nOur "),s("router-link",{attrs:{to:"/server/docker.html"}},[t._v("docker")]),t._v(" docs say more about how the containerization is managed.")],1),t._v(" "),s("p",[t._v("This sub-project borrows from\n"),s("a",{attrs:{href:"https://dev.to/jay97/docker-compose-an-express-and-mongo-app-aai",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://dev.to/jay97/docker-compose-an-express-and-mongo-app-aai"),s("OutboundLink")],1),t._v("\nand\n"),s("a",{attrs:{href:"https://nodejs.org/de/docs/guides/nodejs-docker-webapp/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://nodejs.org/de/docs/guides/nodejs-docker-webapp/"),s("OutboundLink")],1)]),t._v(" "),t._m(2),t._v(" "),s("p",[t._v("To run the server ....")]),t._v(" "),t._m(3),s("p",[t._v("Or run the services in the background and optionally follow the logs of a container")]),t._v(" "),t._m(4),s("p",[t._v("To see what's inside a container run the exec command with sh")]),t._v(" "),t._m(5),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),s("p",[t._v("Nodemon monitors the code for changes and restarts the server when it sees changes. When Nodemon is used inside a docker\ncontainer it requires the use of the legacy watch flag -L")]),t._v(" "),t._m(9),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/docker/labs/issues/378",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/docker/labs/issues/378"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://gist.github.com/ksmithut/e126f7ddb40b760487a17e8b569a77b5",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://gist.github.com/ksmithut/e126f7ddb40b760487a17e8b569a77b5"),s("OutboundLink")],1)])]),t._v(" "),t._m(10),t._v(" "),s("p",[t._v("We add a method to the express application that can be used, in the future, to translate strings.\nIt's far easier to start using this wrapper in the early stages of development\nrather than adding it later.  You can decide later what package you wish to use to manage translations.")]),t._v(" "),t._m(11),t._m(12),t._v(" "),s("p",[t._v("In some high level module define a set of handlers for any exceptions or promise rejections that are not handled by\nthe code.  Optionally exit the process.")]),t._v(" "),t._m(13)])},n,!1,null,null,null);e.default=r.exports}}]);